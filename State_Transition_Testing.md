# 🔄 اختبار الانتقال بين الحالات (State Transition Testing)

## 🎯 ما هو State Transition Testing؟
هو نوع من **اختبارات الصندوق الأسود (Black Box Testing)**  
بيفحص **كيف يتغير سلوك النظام لما تتغير المدخلات (inputs)**.

## 💡 ليش State Transition Testing يعتبر نوع من انواع Black Box Testing؟

لأن **State Transition Testing** بيركّز فقط على:
1. الحالات اللي ممكن النظام يكون فيها (States)
2. التغيرات اللي بتصير لما المستخدم يدخل بيانات أو يعمل حدث (Events)
3. النتيجة اللي بيعرضها النظام (Outputs)

👀 لاحظ:  
إنت ما بتدخل على الكود تشوف "كيف" المبرمج كتب الانتقال من حالة لأخرى،  
إنت بس بتختبر **النتيجة الظاهرة للنظام** لما تغيّر المدخل.

الفكرة:
> لما تغيّر المدخل، النظام ممكن "ينتقل" من حالة (State) إلى حالة جديدة.

🧩 **يعني:**  
النظام دايمًا بيكون في "حالة" (مثل: تسجيل دخول، قفل الحساب، الخ)،  
وكل حدث (Event) بيخليه "ينتقل" لحالة جديدة.

---

## 💡 مثال بسيط:

تخيل عندك **ATM (ماكينة صراف)**  
إذا دخلت الرقم السري صح → بتدخل على حسابك  
إذا غلطت مرة → بيعطيك فرصة ثانية  
إذا غلطت 3 مرات → بيتقفل حسابك

## 💡 مثال 2:

تخيل عندك زر **Submit** ما بتفعل الا لما تعبي كل الخيرات الي مطلوبة خاصة **الإجبارية**

هاي الحالات اسمها **States**،  
والانتقالات بينهم (من حالة لأخرى) اسمها **Transitions**.

---

## ⚙️ متى نستخدم State Transition Testing؟

نستخدمه لما:
1. النظام عنده عدد محدود من الحالات (Finite States).  
2. السلوك الحالي يعتمد على **الأحداث السابقة**.  
3. بدنا نفحص تسلسل الأحداث (Sequence of Inputs).  

🔹 **مثال:**  
الـATM أو شاشة تسجيل دخول تسمح بعدد محاولات محدودة — هدول أنظمة فيها "انتقال بين حالات".

---

## 🚫 متى ما بنستخدمه؟
- لما النظام ما يعتمد على تسلسل الأحداث (يعني كل إدخال مستقل).  
- أو لما بنعمل اختبار استكشافي (Exploratory Testing).

---

## 🧱 مكونات State Transition Model

| العنصر | الوصف |
|--------|--------|
| **States (الحالات)** | المراحل اللي ممكن النظام يكون فيها (مثل: Start، Logged in، Locked) |

<img src="https://www.guru99.com/images/1/103017_0527_WhatIsState1.png">

| **Transitions (الانتقالات)** | التغيير من حالة لأخرى بناءً على حدث |

<img src="https://www.guru99.com/images/1/103017_0527_WhatIsState2.png">

| **Events (الأحداث)** | الأشياء اللي بتحصل وتسبب انتقال (مثل: "إدخال الرقم السري") |

<img src="https://www.guru99.com/images/1/103017_0527_WhatIsState3.png">

| **Actions (الأفعال)** | النتيجة اللي بتصير بعد الانتقال (مثل: "إظهار رسالة خطأ" أو "فتح الحساب") |

<img src="https://www.guru99.com/images/1/103017_0527_WhatIsState4.png">

---

## 🧭 طرق تمثيل الاختبار

في طريقتين رئيسيتين:

### 1️⃣ State Transition Diagram (الرسم البياني)
- المربعات تمثل **الحالات (States)**.  
- الأسهم تمثل **الانتقالات (Transitions)**.  
- بيُستخدم لمعرفة **الانتقالات الصحيحة (Valid Transitions)**.

### 2️⃣ State Transition Table (الجدول)
- الحالات بالصفوف،  
- والأحداث بالأعمدة.  
- كل خلية بتوضح الحالة الجديدة بعد وقوع الحدث.  
- بيُستخدم لمعرفة **الانتقالات الخاطئة (Invalid Transitions)**.
| الحالة | PIN صحيح | PIN خطأ |


---

## 💳 مثال عملي (ATM System)

السيناريو:
> إذا المستخدم دخل رقم سري غلط 3 مرات → الحساب يُقفل  
> إذا دخل الرقم الصح بأي محاولة قبل الثالثة → يتم الدخول بنجاح

### 🔹 الرسم البياني (State Transition Diagram):

<img src="https://www.guru99.com/images/2/state_transition.png">


### 🔹 الجدول (State Transition Table):

| الحالة الحالية | الرقم السري صحيح | الرقم السري خطأ |
|----------------|------------------|------------------|
| S1 (Start) | S5 (Access Granted) | S2 (1st Try) |
| S2 (1st Try) | S5 | S3 (2nd Try) |
| S3 (2nd Try) | S5 | S4 (3rd Try) |
| S4 (3rd Try) | S5 | S6 (Blocked) |
| S5 (Access Granted) | - | - |
| S6 (Blocked) | - | - |

🧠 المعنى:
- إذا دخلت الرقم الصح → بتروح على الحالة S5 (دخول ناجح).  
- إذا غلطت → تنتقل للمحاولة التالية.  
- لو غلطت 3 مرات → تنتقل لحالة "الحساب مقفل".

---

## ✈️ مثال ثاني (تطبيق حجز الطيران)

في شاشة الدخول لازم تدخل **اسم مستخدم + كلمة مرور صحيحة**.  
النظام يسمح بـ 3 محاولات،  
وإذا غلطت بالرابعة → التطبيق يُغلق تلقائيًا.

### الرسم التخطيطي:

<img src="https://www.guru99.com/images/1/103017_0527_WhatIsState5.png">


### الجدول:

| الحالة الحالية | كلمة مرور صحيحة | كلمة مرور خاطئة |
|----------------|------------------|------------------|
| S1 | S6 (Access Granted) | S2 (2nd Try) |
| S2 | S6 | S3 (3rd Try) |
| S3 | S6 | S4 (App Closed) |
| S6 (Access Granted) | - | - |

🔹 باستخدام هذا الجدول، بنقدر نعرف **كل الحالات الصحيحة والخاطئة الممكنة**.

---

## 📊 المزايا (Advantages)

✅ تمثيل **بصري أو جدولي** لسلوك النظام، سهل الفهم والتغطية.  
✅ بيساعد نعرف كل **التحولات المنطقية الممكنة**.  
✅ مثالي للأنظمة اللي فيها "تسلسل أحداث" (مثل ATM، Login، Workflow Systems).

---

## ⚠️ العيوب (Disadvantages)

❌ ما بنقدر نستخدمه لكل الأنظمة — لازم النظام يكون **Finite State System**.  
❌ لو النظام فيه حالات كثيرة جدًا → الجدول بيصير **ضخم ومعقد جدًا**.  
❌ لازم تعرف كل الحالات المحتملة بدقة، وإلا الجدول رح يكون ناقص.

---

## 🧾 الخلاصة

| النقطة | التوضيح |
|--------|----------|
| **التعريف** | تقنية بتختبر تغيّر سلوك النظام لما تتغير الحالات والمدخلات |
| **الهدف** | التأكد من صحة الانتقال بين الحالات المختلفة |
| **الأدوات** | State Diagram + State Table |
| **الأنظمة المناسبة** | الأنظمة ذات التسلسل المنطقي أو المحدود للحالات |
| **النتيجة** | اختبار شامل لسلوك النظام في كل المراحل الممكنة |

---

🧠 **فكر فيها هيك:**
> كل نظام إله "مزاج" بيتغير حسب شو صار قبل 😅  
> State Transition Testing بيخليك تتأكد إن النظام بيتصرف صح بكل حالة ومزاج جديد 👌
