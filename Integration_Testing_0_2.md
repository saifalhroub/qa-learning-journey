
<div dir="rtl" align="right">

## 🔹 ما هو اختبار التكامل (Integration Testing)

اختبار التكامل هو نوع من أنواع اختبار البرمجيات يتم فيه دمج الوحدات البرمجية المختلفة واختبارها كمنظومة واحدة.  
الهدف من هذا الاختبار هو **الكشف عن الأخطاء في تفاعل الوحدات مع بعضها** وضمان أن **تبادل البيانات والتواصل بينها يتم بشكل صحيح** بعد الدمج.

يُعرف أيضًا بأسماء مثل:

- 🧩 **I & T (Integration and Testing)**
- 🔗 **String Testing**
- 🧵 **Thread Testing**

</div>
<div dir="rtl" align="right">

## 🧩 متى ولماذا يتم إجراء اختبار التكامل (Integration Testing)

يتم تنفيذ اختبار التكامل بعد الانتهاء من **اختبار الوحدات (Unit Testing)** وقبل البدء في **اختبار النظام الكامل (System Testing)**.  
الهدف منه هو **التحقق من تدفق البيانات والتفاعل بين الوحدات البرمجية (Modules)**، خصوصًا في البيئات التي تحتوي على **واجهات مشتركة (APIs)** أو خدمات مترابطة.



<img src="https://www.guru99.com/images/1/Integration-Testing.png">



يساعد هذا النوع من الاختبارات على اكتشاف المشكلات التي لا يمكن للوحدات الفردية كشفها، مثل:

- ❌ **عدم تطابق الواجهات** بين الوحدات.
- 🧾 **الأخطاء في العقود أو تنسيقات البيانات** المتبادلة.
- ⚙️ **فشل الاعتماديات (Dependencies)** بين الوحدات المختلفة.

### 🕓 متى نستخدم Integration Testing؟

يُستخدم اختبار التكامل عندما:
- تتبادل الوحدات أو الخدمات بيانات فيما بينها.
- يتم دمج تطبيقك مع **طرف ثالث (Third-party integrations)** مثل بوابات الدفع أو واجهات برمجة خارجية.
- هناك **تعديلات في وحدة** قد تؤثر على وحدات أخرى مرتبطة بها.

### 🎯 الفائدة
إجراء اختبار التكامل مبكرًا يساعد في:
- تقليل عدد العيوب المتسربة (Defect Leakage).  
- رفع جودة المنتج قبل الانتقال لاختبار النظام الكامل أو الإصدار.  
- تعزيز الثقة بأن النظام يعمل كوحدة متكاملة وموثوقة.

### ⚠️ لماذا لا يكفي اختبار الوحدات وحده؟
حتى لو تم اختبار كل وحدة على حدة، تبقى هناك احتمالية أخطاء للأسباب التالية:

1. 👨‍💻 كل مطور له أسلوبه الخاص في كتابة الكود، وقد تختلف منطقية تصميمه عن زملائه.  
2. 🔄 أثناء تطوير الوحدات، قد تتغير **المتطلبات من العميل**، وهذه التعديلات قد لا تكون مغطاة بالاختبارات الفردية.  
3. 💾 واجهات الربط مع **قواعد البيانات** قد تحتوي على أخطاء في التوصيل أو في العمليات.  
4. 🔌 في حال وجود **تكامل مع عتاد خارجي (Hardware)**، قد تظهر أخطاء في الاتصال أو المعالجة.  
5. 🚨 **سوء التعامل مع الاستثناءات (Exception Handling)** قد يؤدي إلى أعطال غير متوقعة عند التشغيل الفعلي.

</div>

<div dir="rtl" align="right">

## 🧩 مثال على اختبار التكامل (Integration Test Case)

**السيناريو:**  
يتكوّن التطبيق من ثلاث وحدات رئيسية:  
1. صفحة تسجيل الدخول (Login Page)  
2. صندوق البريد (Mailbox)  
3. وحدة حذف الرسائل (Delete Emails)

الهدف من اختبار التكامل هو التأكد من أن هذه الوحدات تعمل معًا بانسجام، وأن تدفق البيانات بينها سليم.  
تم مسبقًا إجراء اختبار الوحدات (Unit Testing) لكل وحدة على حدة، لذلك التركيز هنا على الربط بين الوحدات.

---

### 📋 جدول حالات اختبار التكامل

| **معرّف الحالة** | **الهدف من الحالة** | **وصف الحالة** | **النتيجة المتوقعة** |
|-------------------|----------------------|------------------|------------------------|
| TC_INT_01 | التحقق من الربط بين وحدة تسجيل الدخول وصندوق البريد | إدخال بيانات دخول صحيحة والضغط على زر “Login” | يجب توجيه المستخدم إلى صفحة صندوق البريد |
| TC_INT_02 | التحقق من الربط بين وحدة صندوق البريد ووحدة حذف الرسائل | من داخل صندوق البريد، اختر رسالة واضغط على زر “Delete” | يجب أن تظهر الرسالة المحددة في مجلد “Trash” أو “Deleted” |

---

### 💡 ملاحظات إضافية

- يفضّل توثيق **المدخلات المسبقة (Preconditions)** مثل: وجود حساب مستخدم صالح.  
- توثيق **النتائج اللاحقة (Postconditions)** مثل: انتقال الرسالة فعليًا إلى مجلد الحذف.  
- في حالة وجود تبادل بيانات عبر API بين الوحدات، يجب التأكد من صحة الـ **response codes** و**data format** (مثل JSON).

---
<div dir="rtl" align="right">

# 🧩 أنواع اختبار التكامل (Types of Integration Testing)

في هندسة البرمجيات، توجد عدة استراتيجيات لتنفيذ **اختبار التكامل (Integration Testing)**، من أبرزها:

- **Big Bang Approach (الانفجار الكبير)**  
- **Incremental Approach (النهج التزايدي)**، وينقسم إلى:
  - **Bottom-Up Approach (من الأسفل إلى الأعلى)**  
  - **Top-Down Approach (من الأعلى إلى الأسفل)**  
  - **Sandwich Approach (النهج المدمج)** — مزيج من الطريقتين السابقتين  

يختلف تنفيذ كل نهج من حيث طريقة الدمج، الترتيب الزمني، والقيود والفوائد المرافقة له.

---

## 🚀 Big Bang Testing (اختبار الانفجار الكبير)

**التعريف:**  
في هذا النهج يتم دمج جميع الوحدات أو المكونات البرمجية مرة واحدة، ثم اختبارها كوحدة واحدة شاملة.  
إذا لم تكن جميع المكونات جاهزة، لا يمكن تنفيذ الاختبار.

### ✅ المميزات
- إعداد سريع: دمج كل الوحدات دفعة واحدة.  
- رؤية كاملة للنظام: يمكن ملاحظة السلوك العام مباشرة.  
- لا حاجة إلى Stubs أو Drivers إضافية.  
- مناسب للمشاريع الصغيرة والبسيطة.  
- يشبه تجربة المستخدم الحقيقية.

### ❌ العيوب
- صعوبة في تتبع الأخطاء وتحديد مصدرها.  
- اكتشاف العيوب متأخر بعد اكتمال الدمج.  
- مخاطرة عالية: أي خلل كبير قد يوقف كامل الاختبار.  
- لا يصلح للأنظمة الكبيرة والمعقدة.  
- تغطية اختبار ضعيفة لبعض الوحدات.

---

## ⚙️ Incremental Testing (الاختبار التزايدي)

**التعريف:**  
يتم دمج واختبار الوحدات البرمجية تدريجيًا، بحيث يُختبر كل جزء مدمج قبل إضافة الجزء التالي، إلى أن يكتمل النظام كليًا.

### الطرق المستخدمة:
1. **Bottom-Up Integration**  
2. **Top-Down Integration**  
3. **Sandwich (Hybrid) Integration**

---

## 🔽 Bottom-Up Integration Testing (من الأسفل إلى الأعلى)

**الفكرة:**  
يبدأ الاختبار من الوحدات الأدنى (القواعد الأساسية) ثم يتم دمجها تدريجيًا مع الوحدات الأعلى حتى الوصول إلى الطبقة العليا من النظام.



<img src="https://www.guru99.com/images/bottom-up-integration-testing.png">




### ✅ المميزات
- اختبار الوحدات المبكرة أولًا يضمن أساسًا متينًا.  
- تتبع الأخطاء أسهل على مستوى الوحدة.  
- لا حاجة إلى Stubs، فقط Drivers بسيطة.  
- النظام ينمو بثقة مع كل خطوة دمج.

### ❌ العيوب
- رؤية المستخدم للنظام تأتي في مراحل متأخرة.  
- الحاجة إلى Drivers إضافية.  
- اختبار الواجهة (UI) يتأخر.  
- العملية تستغرق وقتًا أطول.  
- قد يتم إغفال تفاعلات المستويات العليا.

---

## 🔼 Top-Down Integration Testing (من الأعلى إلى الأسفل)

**الفكرة:**  
يبدأ الاختبار من الوحدات العليا (الرئيسية) نزولًا إلى الأدنى، حسب تدفق التحكم في النظام.  
إذا لم تكن بعض الوحدات جاهزة، تُستخدم **Stubs** لمحاكاتها.


<img src="https://www.guru99.com/images/top-down-integration-testing.png">


### ✅ المميزات
- رؤية مبكرة لسلوك النظام من منظور المستخدم.  
- اختبار الوحدات الحرجة أولًا.  
- اكتشاف الأخطاء تدريجيًا.  
- لا حاجة إلى Drivers (فقط Stubs).  
- تأكيد مبكر على صحة التصميم العام للنظام.

### ❌ العيوب
- الحاجة إلى إنشاء Stubs كثيرة.  
- اختبار الوحدات السفلية يتأخر.  
- بعض الاختبارات المبكرة غير مكتملة.  
- تتبع الأخطاء أكثر صعوبة.  
- الوقت الإضافي لإنشاء Stubs.

---

## 🥪 Sandwich (Hybrid) Integration Testing (النهج المدمج)

**الفكرة:**  
يتم اختبار الوحدات العليا والسفلى معًا بشكل متوازي، ودمجهما تدريجيًا حتى تكتمل الوحدات المتوسطة.  
هذا النهج يجمع بين ميزات **Top-Down** و**Bottom-Up**.



<img src="https://www.guru99.com/images/1/Hybrid-Integration.png">

### ✅ المميزات
- موازنة بين الطريقتين.  
- اختبار متوازي لأجزاء النظام العليا والسفلى.  
- تغطية أسرع للمكونات.  
- اختبار الوحدات الحرجة في المستويين معًا.  
- تقليل المخاطر باكتشاف الأخطاء من الجهتين.

### ❌ العيوب
- تعقيد عالٍ في الإدارة والتخطيط.  
- الحاجة إلى كل من **Stubs** و**Drivers**.  
- تكلفة أكبر من حيث الوقت والموارد.  
- تأخر اختبار الوحدات المتوسطة.  
- غير مناسب للأنظمة الصغيرة.

---

<div dir="rtl" align="right">

# ⚙️ الدرس الخامس: الـ Stubs و الـ Drivers في اختبار التكامل (Integration Testing)

عندما تبدأ باختبار تكامل نظام لم يكتمل بعد — مثلاً بعض الوحدات لسه ما تم تطويرها — نحتاج لطريقة **نخدع فيها النظام** ليتصرف كأنه مكتمل.  
وهنا يظهر دور أبطال الظل في عالم الاختبار: **الـ Stubs** و **الـ Drivers**.  
هما برامج مؤقتة (Dummy Programs) تسمح باستمرار الاختبار دون انتظار اكتمال المشروع فعليًا.

---

## 🧱 ما هو الـ Stub؟

**الـ Stub** هو وحدة تجريبية تحاكي **الوحدات الأدنى** (Lower-Level Modules) غير الجاهزة بعد.  
الوحدة التي تختبرها تستدعي الـ Stub، والـ Stub يرجع ردودًا جاهزة (predefined responses).  
بكلمات أبسط: الـ Stub هو **ممثل بسيط** يقوم بدور جزء من النظام لم يتم بناؤه بعد.

**مثال عملي:**  
أنت تختبر **وحدة الدفع (Payment Module)**، لكنها تعتمد على **وحدة احتساب الضريبة (Tax Module)** التي لم تُبرمج بعد.  
بدل الانتظار، تكتب Stub يُرجع دائمًا 10% كضريبة — فقط لتكمل اختبار الدفع.

**خصائص الـ Stubs:**
- تحاكي سلوك الوحدات الأدنى.  
- ترجع قيمًا بسيطة أو ثابتة.  
- تُستخدم غالبًا في **اختبار التكامل من الأعلى للأسفل (Top-Down Integration Testing)**.  
- لا تحتوي على منطق فعلي، فقط استجابات محددة مسبقًا.  

---

## 🧩 ما هو الـ Driver؟

**الـ Driver** هو عكس الـ Stub.  
هو وحدة مؤقتة تستدعي **الوحدات الأدنى** بهدف اختبارها — أي أنه يحاكي الوحدات الأعلى (Higher-Level Modules) التي لم تُطور بعد.

**مثال عملي:**  
عند اختبار وحدة قاعدة البيانات (Database Module)، قد لا تكون **واجهة التطبيق (Business Logic Layer)** جاهزة.  
فتكتب Driver بسيط يرسل أوامر إلى قاعدة البيانات، ويجمع النتائج ليتحقق منها.

**خصائص الـ Drivers:**
- تستدعي الوحدات قيد الاختبار ببيانات تجريبية.  
- تتحكم بتدفق الاختبار.  
- تُستخدم في **اختبار التكامل من الأسفل إلى الأعلى (Bottom-Up Integration Testing)**.  
- تساعد على فحص المخرجات والنتائج.  

---

## 💡 تطبيق عملي شامل

اختبار وحدة الدفع في نظام تجارة إلكترونية:

| المكون | الدور | الوصف |
|--------|--------|--------|
| **Stub** | محاكاة وحدة احتساب الضريبة | يُرجع ضريبة ثابتة (مثلاً 10%) |
| **Driver** | محاكاة عملية الشراء | يرسل بيانات الشراء لوحدة الدفع |
| **النتيجة** | اختبار وحدة الدفع بنجاح دون انتظار بقية النظام |

---

## 🧭 متى نستخدم كل منهما؟

| العنصر | Stub | Driver |
|--------|------|--------|
| **نهج الاختبار** | Top-Down Testing | Bottom-Up Testing |
| **يستبدل** | الوحدات الأدنى | الوحدات الأعلى |
| **الوظيفة** | يرجع بيانات بسيطة | يرسل بيانات اختبار |
| **التعقيد** | بسيط | أكثر تنظيمًا وتحكمًا |

**الهدف:** تسريع عملية التكامل، تقليل الاعتمادية على باقي الفرق، وضمان استمرار سير الاختبارات حتى لو لم يكتمل المشروع بعد.

---

# 🧪 خطوات تنفيذ اختبار التكامل (Integration Testing Steps)

بغض النظر عن الاستراتيجية (Top-Down / Bottom-Up / Hybrid)، تتبع العملية خطوات أساسية:

1. إعداد **خطة اختبار التكامل (Integration Test Plan)**.  
2. تصميم **السيناريوهات، الحالات، والسكريبتات**.  
3. تنفيذ حالات الاختبار وتسجيل العيوب.  
4. **إعادة الاختبار (Re-Testing)** بعد التصحيح.  
5. تكرار الخطوتين 3 و4 حتى نجاح التكامل بالكامل.

---

## 📋 خطة اختبار التكامل (Integration Test Plan)

تشمل الخطة النقاط التالية:

- المنهج أو الطريقة المتبعة في الاختبار.  
- نطاق الاختبار والعناصر الخارجة عن النطاق.  
- الأدوار والمسؤوليات داخل الفريق.  
- المتطلبات المسبقة لبدء الاختبار.  
- بيئة الاختبار المطلوبة.  
- تحليل المخاطر وخطط التعامل معها.  

---

## 🚪 معايير الدخول والخروج (Entry & Exit Criteria)

تضمن هذه المعايير وضوح بداية ونهاية مرحلة اختبار التكامل بشكل منظم.

**معايير الدخول (Entry Criteria):**
- جميع الوحدات اجتازت اختبار الوحدة (Unit Testing).  
- إصلاح كل الأخطاء عالية الأولوية.  
- اكتمال عملية الدمج البرمجي بنجاح.  
- توثيق واعتماد خطة الاختبار والسيناريوهات.  
- جاهزية بيئة الاختبار.

**معايير الخروج (Exit Criteria):**
- نجاح اختبار التطبيق المدمج بالكامل.  
- توثيق جميع حالات الاختبار المنفذة.  
- إغلاق جميع الأخطاء الحرجة.  
- تسليم الوثائق الفنية وإصدار ملاحظات الإصدار (Release Notes).  

---

# 🧠 تصميم حالات اختبار التكامل (Integration Test Case Design)

القيمة الحقيقية لاختبار التكامل تكمن في **تدفق البيانات الحقيقي بين الطبقات**.  
مثال عملي يوضح ذلك 👇  

**سيناريو: تسجيل دخول المستخدم**

| الخطوة | الإدخال | النتيجة المتوقعة |
|--------|----------|-----------------|
| 1 | المستخدم يدخل بيانات صحيحة في واجهة الدخول | تُرسل البيانات إلى واجهة الـ API |
| 2 | الـ API تتحقق من البيانات في قاعدة البيانات | قاعدة البيانات تؤكد صحة المستخدم |
| 3 | الـ API تُرجع رمز مصادقة (Token) | يتم إرسال الرمز إلى التطبيق |
| 4 | واجهة المستخدم تُحول المستخدم إلى لوحة التحكم | يتم إنشاء جلسة دخول ناجحة |

هذا السيناريو يختبر التواصل بين ثلاث طبقات:  
**واجهة المستخدم → واجهة البرمجة (API) → قاعدة البيانات.**

---

# 🧭 أفضل الممارسات في اختبار التكامل (Best Practices)

- حدد الاستراتيجية المناسبة قبل بدء التنفيذ.  
- ادرس تصميم النظام وحدد الوحدات الحرجة لاختبارها أولًا.  
- راجع مخططات الواجهات من الفريق المعماري.  
- اختبر كل واجهة (API، قاعدة بيانات، أجهزة خارجية) بعمق.  
- جهّز **بيانات اختبار (Mock Data)** مسبقًا — لا تختارها أثناء التنفيذ.  

---

# ⚠️ التحديات الشائعة وحلولها

| التحدي | الوصف | الحل |
|--------|--------|------|
| **تعقيد الاعتماديات** | تداخل الوحدات يؤدي إلى أعطال متسلسلة | استخدم تقنيات مثل Dependency Injection وDocker وخرائط الاعتماديات |
| **الوحدات غير المكتملة** | تأخير الاختبار لغياب بعض المكونات | بناء Stubs/Drivers مبكرًا واستخدام Service Virtualization |
| **إدارة بيانات الاختبار** | صعوبة الحفاظ على بيانات موحدة | توليد بيانات تلقائيًا واستعمال نسخ لقواعد البيانات |
| **تكوين البيئة (Environment)** | بيئات غير متطابقة تسبب أخطاء | استخدم IaC وAnsible وDocker لضمان التطابق |
| **صعوبة التتبع (Debugging)** | صعب تحديد مصدر الخطأ بين الوحدات | استخدم Logging شامل وTracing بأدوات مثل Jaeger |
| **تكامل الخدمات الخارجية** | APIs خارجية تتغير أو تتعطل | استخدم Mock Servers مثل Postman Mock Server |
| **مشكلات الأداء** | عنق الزجاجة في نقاط التكامل | نفّذ اختبارات أداء مبكرة واستخدم التخزين المؤقت (Caching) |

---

</div>
